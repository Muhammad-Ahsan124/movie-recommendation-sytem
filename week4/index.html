<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Two-Tower + Deep (MLP) Retrieval — MovieLens 100K (TF.js)</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
button { margin: 5px; padding: 8px 16px; }
canvas { border: 1px solid #ccc; margin-top: 10px; }
table { border-collapse: collapse; margin-top: 10px; }
td, th { border: 1px solid #ccc; padding: 6px 10px; }
</style>
</head>
<body>
<h3>Two-Tower + Deep (MLP) Retrieval — MovieLens 100K (TF.js)</h3>

<div>
  <button id="loadBtn">Load Data</button>
  <button id="trainBtn">Train</button>
  <button id="testBtn">Test</button>
  embeddingDim: <input id="embDim" value="32" size="3">
  epochs: <input id="epochs" value="5" size="3">
  batch: <input id="batch" value="128" size="3">
  maxInteractions: <input id="maxInt" value="80000" size="6">
  <span id="status"></span>
</div>
<p>Tips: Place files under <code>/data/u.data</code> and <code>/data/u.item</code> — works with GitHub Pages.</p>

<div style="display:flex; flex-wrap:wrap;">
  <div style="flex:1; min-width:300px;">
    <h4>Training / Loss</h4>
    <canvas id="lossChart" width="400" height="200"></canvas>
  </div>
  <div style="flex:1; min-width:300px;">
    <h4>Results — Test (Side-by-side)</h4>
    <p>Press Test after training to see comparison tables.</p>
    <div>
      <label><input type="checkbox" id="useBPR"> Use BPR loss</label><br>
      <label><input type="checkbox" id="useGenres" checked> Use genres as item features (Deep)</label><br>
      <label><input type="checkbox" id="useUserFeat" checked> Use synthesized user features (Deep)</label><br>
      <label><input type="checkbox" id="useDeep" checked> Train Deep (MLP) model in addition to Two-Tower</label>
    </div>
  </div>
</div>

<div>
  <h4>Embedding Projection (sampled items)</h4>
  <canvas id="projCanvas" width="600" height="400"></canvas>
</div>

<div id="resultsTable"></div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0"></script>
<script src="two-tower.js"></script>
<script src="app.js"></script>
</body>
</html>
